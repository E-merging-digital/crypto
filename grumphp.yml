# grumphp.yml
grumphp:
  git_hook_variables:
    EXEC_GRUMPHP_COMMAND: ddev exec
  stop_on_failure: true
  process_timeout: 300
  parallel: false

  tasks:
    phpcs:
      standard: [Drupal, DrupalPractice]
      triggered_by: ['php', 'module', 'inc', 'install', 'test', 'profile', 'theme']
      ignore_patterns:
        - web/core/*
        - web/vendor/*
    twigcs:
      triggered_by: [ 'twig' ]
      # On laisse path à sa valeur par défaut ('.'); ne PAS fournir un tableau ici.
      severity: warning
      display: all
      ruleset: FriendsOfTwig\Twigcs\Ruleset\Official
      exclude:
        - vendor/**
        - web/core/**
        - web/modules/contrib/**
        - web/themes/contrib/**
    phpstan:
      configuration: phpstan.neon
      memory_limit: "2G"
    shell:
      scripts:
        - ["-c", "./scripts/run-tests.sh"]

    # optionnel : si vous avez un phpunit.xml.dist et voulez la tâche native à côté
    # phpunit:
    #   testsuite: grumphp
    #   config_file: web/phpunit.xml.dist
